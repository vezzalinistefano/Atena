{% extends 'base.html' %}

{% block content %}
    <h1 style="text-align: center">{{ course.title }}</h1>
    <h4>Teacher: {{ course.teacher }}</h4>

    {% block video %}
    {% endblock %}

    <br>

    <div id="accordion">
        <div class="card">
            <div class="card-header" id="headingOne">
                <h5 class="mb-0">
                    <button class="btn btn-secondary dropdown-toggle" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true"
                            aria-controls="collapseOne">
                        Comments
                    </button>
                </h5>
            </div>

            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                <div class="card-body">
                    {% for comment in course.comments.all %}
                        <h5>
                            <strong>{{ comment.user.username }}</strong> - {{ comment.date_added }}
                        </h5>
                        <h6>
                            {{ comment.body }}
                        </h6>
                        <hr>
                    {% empty %}
                        Still no comments in here, maybe you could be the first!
                    {% endfor %}
                    <br>
                    {% if user.is_authenticated %}
                        <a href="{% url 'shop:add-comment' object.pk %}">Add comment</a>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header" id="headingTwo">
                <h5 class="mb-0">
                    <button class="btn btn-secondary dropdown-toggle collapsed" data-toggle="collapse" data-target="#collapseTwo"
                            aria-expanded="false" aria-controls="collapseTwo">
                        Reviews
                    </button>
                </h5>
            </div>
            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                <div class="card-body">
                    {% for review in course.reviews.all %}
                        <h5>
                            <strong>{{ review.author.username }}</strong> - {{ review.date_added }}
                        </h5>
                        <h6>
                            <strong>{{ review.get_vote }}</strong> | {{ review.body }}
                        </h6>
                        <hr>
                    {% empty %}
                        Still no reviews in here, maybe you could be the first!
                    {% endfor %}
                    {% if user.is_authenticated %}
                        <br>
                        <a href="{% url 'shop:add-review' object.pk %}">Add review</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}